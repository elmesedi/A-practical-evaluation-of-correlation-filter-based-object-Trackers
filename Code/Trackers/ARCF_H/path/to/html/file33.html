<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /><title>Profile Summary</title></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><title>Function details for tracker_HOG</title><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">tracker_HOG (Calls: 3, Time: 80.676 s)</span><br/><i>Generated 10-Dec-2020 16:34:04 using performance time.</i><br/>function in file D:\Master\TASK4(5-12-2020)\3\ARCF-tracker-master(Huang_Learning_Aberrance_Repressed_Correlation_Filters_for_Real-Time_UAV_Tracking_ICCV_2019_paper)\ARCF-tracker-master\implementation\HOG\tracker_HOG.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Name</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Type</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file193.html">run_ARCF_H</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">3</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Line Number</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Code</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Total Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">% Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line363">363</a></td><td class="td-linebottomrt"><pre>drawnow</pre></td><td class="td-linebottomrt">356</td><td class="td-linebottomrt">22.497 s</td><td class="td-linebottomrt" class="td-linebottomrt">27.9%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=28 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line166">166</a></td><td class="td-linebottomrt"><pre>im = imread([s_frames{frame}])...</pre></td><td class="td-linebottomrt">358</td><td class="td-linebottomrt">10.571 s</td><td class="td-linebottomrt" class="td-linebottomrt">13.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=13 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line184">184</a></td><td class="td-linebottomrt"><pre>xtf = fft2(bsxfun(@times,get_f...</pre></td><td class="td-linebottomrt">355</td><td class="td-linebottomrt">7.586 s</td><td class="td-linebottomrt" class="td-linebottomrt">9.4%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=9 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line334">334</a></td><td class="td-linebottomrt"><pre>im_to_show = double(im)/255;</pre></td><td class="td-linebottomrt">358</td><td class="td-linebottomrt">6.945 s</td><td class="td-linebottomrt" class="td-linebottomrt">8.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=9 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line202">202</a></td><td class="td-linebottomrt"><pre>[disp_row, disp_col, sind] = r...</pre></td><td class="td-linebottomrt">355</td><td class="td-linebottomrt">5.807 s</td><td class="td-linebottomrt" class="td-linebottomrt">7.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">27.270 s</td><td class="td-linebottomrt">33.8%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=34 height=10></td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Totals</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">80.676 s</td><td class="td-linebottomrt" style="background-color:#F0F0F0">100%</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file52.html">imread</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">722</td><td class="td-linebottomrt">10.837 s</td><td class="td-linebottomrt">13.4%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=13 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file152.html">get_features</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">713</td><td class="td-linebottomrt">6.360 s</td><td class="td-linebottomrt">7.9%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=8 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file175.html">resp_newton</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">355</td><td class="td-linebottomrt">5.799 s</td><td class="td-linebottomrt">7.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file147.html">get_pixels</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">2133</td><td class="td-linebottomrt">5.765 s</td><td class="td-linebottomrt">7.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file165.html">imagesc</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">709</td><td class="td-linebottomrt">4.650 s</td><td class="td-linebottomrt">5.8%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=6 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file137.html">fft2</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1432</td><td class="td-linebottomrt">2.671 s</td><td class="td-linebottomrt">3.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=3 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file153.html">ifft2</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1074</td><td class="td-linebottomrt">1.532 s</td><td class="td-linebottomrt">1.9%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file166.html">hold</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">712</td><td class="td-linebottomrt">0.515 s</td><td class="td-linebottomrt">0.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file178.html">colormap</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">353</td><td class="td-linebottomrt">0.370 s</td><td class="td-linebottomrt">0.5%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file179.html">alpha</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">353</td><td class="td-linebottomrt">0.268 s</td><td class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file187.html">close</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.091 s</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file32.html">num2str</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">353</td><td class="td-linebottomrt">0.072 s</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file154.html">get_subwindow_no_window</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">716</td><td class="td-linebottomrt">0.059 s</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file168.html">axis</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td><td class="td-linebottomrt">0.053 s</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file34.html">int2str</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">709</td><td class="td-linebottomrt">0.049 s</td><td class="td-linebottomrt">0.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file184.html">closereq</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0.036 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file155.html">resizeDFT2</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">358</td><td class="td-linebottomrt">0.022 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file156.html">fftshift</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">711</td><td class="td-linebottomrt">0.021 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file146.html">hann</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td><td class="td-linebottomrt">0.018 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file136.html">ndgrid</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0.004 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">41.483 s</td><td class="td-linebottomrt">51.4%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2017b\toolbox\matlab\codetools\private\one-pixel.gif" width=51 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">80.676 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line257">257</a></td><td class="td-linebottomrt"><span class="mono">The variable 'map_diff' appears to change size on every loop iteration. Consider preallocating for speed.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line319">319</a></td><td class="td-linebottomrt"><span class="mono">The value assigned to variable 'max_M_prev' might be unused.</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory<br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Total lines in function</td><td class="td-linebottomrt">372</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">101</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">271</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">224</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">47</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">82.66 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table id="FunctionListingTable"><tr style="height:20px;"><th><pre><span style="color:#FF0000;">time</span> </pre></th><th><pre><span style="color:#0000FF;">Calls</span> </pre></th><th class="leftAligned" COLSPAN=2><pre><span> line</span></pre></th></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   3</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">function [results] = tracker_HOG(params)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   4</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">   5</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%   Setting parameters for local use.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">   6</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">search_area_scale   = params.search_area_scale; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">   7</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">output_sigma_factor = params.output_sigma_factor; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">   8</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">learning_rate       = params.learning_rate; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">   9</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">filter_max_area     = params.filter_max_area; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  10</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">nScales             = params.number_of_scales; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  11</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">scale_step          = params.scale_step; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  12</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">interpolate_response = params.interpolate_response; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  13</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">admm_gamma          = params.admm_gamma; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  14</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">admm_iterations     = params.admm_iterations; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  15</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  16</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">features    = params.t_features; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  17</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">video_path  = params.video_path; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  18</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">s_frames    = params.s_frames; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  19</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">pos         = floor(params.init_pos); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  20</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">target_sz   = floor(params.wsize); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  21</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  22</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">visualization  = params.visualization; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  23</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">num_frames     = params.no_fram; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  24</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">init_target_sz = target_sz; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  25</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  26</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Define data types</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  27</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if params.use_gpu </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  28</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    params.t_global.data_type = zeros(1, 'single', 'gpuArray');</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  29</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  30</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    params.t_global.data_type = zeros(1, 'single'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  31</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  32</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  33</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%set the feature ratio to the feature-cell size</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  34</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">featureRatio = params.t_global.cell_size; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  35</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">search_area = prod(init_target_sz / featureRatio * search_area_scale); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  36</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  37</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% when the number of cells are small, choose a smaller cell size</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  38</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if isfield(params.t_global, 'cell_selection_thresh') </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  39</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if search_area &lt; params.t_global.cell_selection_thresh * filter_max_area </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  40</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        params.t_global.cell_size = min(featureRatio, max(1, ceil(sqrt(prod(init_target_sz * search_area_scale)/(params.t_global.cell_selection_thresh * filter_max_area)))));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  41</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  42</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        featureRatio = params.t_global.cell_size;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  43</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        search_area = prod(init_target_sz / featureRatio * search_area_scale);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  44</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  45</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  46</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  47</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">global_feat_params = params.t_global; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  48</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  49</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if search_area &gt; filter_max_area </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  50</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    currentScaleFactor = sqrt(search_area / filter_max_area); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  51</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">else</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  52</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    currentScaleFactor = 1.0;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  53</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  54</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  55</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% target size at the initial scale</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  56</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">base_target_sz = target_sz / currentScaleFactor; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  57</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  58</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% window size, taking padding into account</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  59</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">switch params.search_area_shape </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  60</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    case 'proportional' </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  61</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        sz = floor( base_target_sz * search_area_scale);     % proportional area, same aspect ratio as the target</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  62</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    case 'square' </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  63</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        sz = repmat(sqrt(prod(base_target_sz * search_area_scale)), 1, 2); % square area, ignores the target aspect ratio </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  64</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    case 'fix_padding'</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  65</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        sz = base_target_sz + sqrt(prod(base_target_sz * search_area_scale) + (base_target_sz(1) - base_target_sz(2))/4) - sum(base_target_sz)/2; % const padding</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  66</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    otherwise</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  67</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        error('Unknown "params.search_area_shape". Must be ''proportional'', ''square'' or ''fix_padding''');</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  68</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  69</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  70</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% set the size to exactly match the cell size</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  71</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">sz = round(sz / featureRatio) * featureRatio; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  72</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">use_sz = floor(sz/featureRatio); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  73</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  74</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% construct the label function- correlation output, 2D gaussian function,</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  75</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% with a peak located upon the target</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  76</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">output_sigma = sqrt(prod(floor(base_target_sz/featureRatio))) * output_sigma_factor; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  77</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">rg           = circshift(-floor((use_sz(1)-1)/2):ceil((use_sz(1)-1)/2), [0 -floor((use_sz(1)-1)/2)]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  78</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">cg           = circshift(-floor((use_sz(2)-1)/2):ceil((use_sz(2)-1)/2), [0 -floor((use_sz(2)-1)/2)]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  79</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">[rs, cs]     = <a href="file136.html">ndgrid</a>( rg,cg); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  80</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">y            = exp(-0.5 * (((rs.^2 + cs.^2) / output_sigma^2))); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  81</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">yf           = <a href="file137.html">fft2</a>(y); %   FFT of y. </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  82</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  83</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if interpolate_response == 1 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  84</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    interp_sz = use_sz * featureRatio;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  85</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  86</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    interp_sz = use_sz; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  87</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  88</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  89</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% construct cosine window</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.02 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  90</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">cos_window = single(<a href="file146.html">hann</a>(use_sz(1))*<a href="file146.html">hann</a>(use_sz(2))'); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  91</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  92</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% Calculate feature dimension</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  93</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">try </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  94</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    im = <a href="file52.html">imread</a>([video_path '/img/' s_frames{1}]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  95</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">catch </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  96</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    try </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.09 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  97</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        im = <a href="file52.html">imread</a>(s_frames{1}); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  98</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    catch</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  99</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        %disp([video_path '/' s_frames{1}])</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 100</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        im = imread([video_path '/' s_frames{1}]);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 101</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 102</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 103</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if size(im,3) == 3 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 104</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if all(all(im(:,:,1) == im(:,:,2))) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 105</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        colorImage = false;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 106</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 107</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        colorImage = true; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 108</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 109</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">else</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 110</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    colorImage = false;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 111</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 112</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 113</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% compute feature dimensionality</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 114</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">feature_dim = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 115</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">for n = 1:length(features) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 116</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 117</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if ~isfield(features{n}.fparams,'useForColor') </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 118</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        features{n}.fparams.useForColor = true; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 119</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 120</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 121</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if ~isfield(features{n}.fparams,'useForGray') </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 122</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        features{n}.fparams.useForGray = true; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 123</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 124</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 125</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if (features{n}.fparams.useForColor &amp;&amp; colorImage) || (features{n}.fparams.useForGray &amp;&amp; ~colorImage) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 126</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        feature_dim = feature_dim + features{n}.fparams.nDim; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 127</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 128</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 129</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 130</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if size(im,3) &gt; 1 &amp;&amp; colorImage == false </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 131</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    im = im(:,:,1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 132</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 133</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 134</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if nScales &gt; 0 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 135</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    scale_exp = (-floor((nScales-1)/2):ceil((nScales-1)/2)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 136</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    scaleFactors = scale_step .^ scale_exp; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 137</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    min_scale_factor = scale_step ^ ceil(log(max(5 ./ sz)) / log(scale_step)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 138</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    max_scale_factor = scale_step ^ floor(log(min([size(im,1) size(im,2)] ./ base_target_sz)) / log(scale_step)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 139</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 140</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 141</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">if interpolate_response &gt;= 3 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 142</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    % Pre-computes the grid that is used for socre optimization</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 143</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    ky = circshift(-floor((use_sz(1) - 1)/2) : ceil((use_sz(1) - 1)/2), [1, -floor((use_sz(1) - 1)/2)]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 144</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    kx = circshift(-floor((use_sz(2) - 1)/2) : ceil((use_sz(2) - 1)/2), [1, -floor((use_sz(2) - 1)/2)])'; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 145</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    newton_iterations = params.newton_iterations; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 146</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 147</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 148</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% initialize the projection matrix (x,y,h,w)</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 149</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">rect_position = zeros(num_frames, 4); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 150</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">time = 0; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 151</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 152</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% allocate memory for multi-scale tracking</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 153</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">multires_pixel_template = zeros(sz(1), sz(2), size(im,3), nScales, 'uint8'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 154</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">small_filter_sz = floor(base_target_sz/featureRatio); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 155</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 156</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% initialize previous response map</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 157</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">M_prev = zeros(use_sz); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 158</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 159</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">loop_frame = 1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 160</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">for frame = 1:numel(s_frames) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 161</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %load image</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 162</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    try </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.39 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 163</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        im = <a href="file52.html">imread</a>([video_path '/img/' s_frames{frame}]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 164</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    catch </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 165</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        try </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 10.57 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 166</span><a name="Line166"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFC6C6; padding:1px;">            im = <a href="file52.html">imread</a>([s_frames{frame}]); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 167</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        catch</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 168</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            im = imread([video_path '/' s_frames{frame}]);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 169</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 170</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 171</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if size(im,3) &gt; 1 &amp;&amp; colorImage == false </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 172</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        im = im(:,:,1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 173</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">    end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 174</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 175</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    tic(); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 176</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 177</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %do not estimate translation and scaling on the first frame, since we</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 178</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %just want to initialize the tracker there</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 179</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if frame &gt; 1 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 180</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        for scale_ind = 1:nScales </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  5.19 </span></pre></td><td><pre><span style="color: #0000FF">   1775 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 181</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFE2E2; padding:1px;">            multires_pixel_template(:,:,:,scale_ind) = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">   1775 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 182</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFE2E2; padding:1px;">                <a href="file147.html">get_pixels</a>(im, pos, round(sz*currentScaleFactor*scaleFactors(scale_ind)), sz); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">   1775 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 183</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  7.59 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 184</span><a name="Line184"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFD4D4; padding:1px;">        xtf = <a href="file137.html">fft2</a>(bsxfun(@times,<a href="file152.html">get_features</a>(multires_pixel_template,features,global_feat_params),cos_window)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.41 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 185</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        responsef = permute(sum(bsxfun(@times, conj(g_f), xtf), 3), [1 2 4 3]); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 186</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 187</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % if we undersampled features, we want to interpolate the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 188</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % response so it has the same size as the image patch</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 189</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if interpolate_response == 2 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 190</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % use dynamic interp size</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 191</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            interp_sz = floor(size(y) * featureRatio * currentScaleFactor);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 192</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 193</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        responsef_padded = <a href="file155.html">resizeDFT2</a>(responsef, interp_sz); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 194</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 195</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % response in the spatial domain</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.22 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 196</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        response = <a href="file153.html">ifft2</a>(responsef_padded, 'symmetric'); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 197</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 198</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % find maximum peak</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 199</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if interpolate_response == 3 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 200</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            error('Invalid parameter value for interpolate_response');</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 201</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        elseif interpolate_response == 4 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  5.81 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 202</span><a name="Line202"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFE2E2; padding:1px;">            [disp_row, disp_col, sind] = <a href="file175.html">resp_newton</a>(response, responsef_padded, newton_iterations, ky, kx, use_sz); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 203</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        else</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 204</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            [row, col, sind] = ind2sub(size(response), find(response == max(response(:)), 1));</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 205</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            disp_row = mod(row - 1 + floor((interp_sz(1)-1)/2), interp_sz(1)) - floor((interp_sz(1)-1)/2);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 206</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            disp_col = mod(col - 1 + floor((interp_sz(2)-1)/2), interp_sz(2)) - floor((interp_sz(2)-1)/2);</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 207</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 208</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 209</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % calculate translation</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 210</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        switch interpolate_response </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 211</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            case 0 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 212</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                translation_vec = round([disp_row, disp_col] * featureRatio * currentScaleFactor * scaleFactors(sind));</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 213</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            case 1 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 214</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                translation_vec = round([disp_row, disp_col] * currentScaleFactor * scaleFactors(sind));</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 215</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            case 2 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 216</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                translation_vec = round([disp_row, disp_col] * scaleFactors(sind));</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 217</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            case 3 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 218</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                translation_vec = round([disp_row, disp_col] * featureRatio * currentScaleFactor * scaleFactors(sind));</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 219</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            case 4 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 220</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                translation_vec = round([disp_row, disp_col] * featureRatio * currentScaleFactor * scaleFactors(sind)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 221</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 222</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 223</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % set the scale</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 224</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        currentScaleFactor = currentScaleFactor * scaleFactors(sind); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 225</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % adjust to make sure we are not to large or to small</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 226</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if currentScaleFactor &lt; min_scale_factor </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 227</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            currentScaleFactor = min_scale_factor;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 228</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        elseif currentScaleFactor &gt; max_scale_factor </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 229</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            currentScaleFactor = max_scale_factor;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 230</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 231</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 232</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % update position</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 233</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        old_pos = pos; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 234</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        pos = pos + translation_vec; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 235</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 236</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % find peak in the map</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.02 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 237</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        M_curr = <a href="file156.html">fftshift</a>(response(:,:,sind)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 238</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        max_M_curr = max(M_curr(:)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 239</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        [id_ymax_curr, id_xmax_curr] = find(M_curr == max_M_curr); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 240</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 241</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % do shifting of previous response map</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 242</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        shift_y = id_ymax_curr - id_ymax_prev; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 243</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        shift_x = id_xmax_curr - id_xmax_prev; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 244</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        sz_shift_y = size(shift_y); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 245</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        sz_shift_x = size(shift_x); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 246</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if(sz_shift_y(1) &gt; 1) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 247</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            shift_y = shift_y(1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 248</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 249</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if(sz_shift_x(1) &gt; 1) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 250</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            shift_x = shift_x(1);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 251</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 252</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 253</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        M_prev = circshift(M_prev,shift_y,1); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 254</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        M_prev = circshift(M_prev,shift_x,2); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 255</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 256</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % map difference</span><br/></pre></td></tr><tr><a name="Line257"></a><td><pre><span style="color: #FF0000">  0.11 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 257</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        map_diff(frame) = norm(abs(M_prev - M_curr)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 258</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 259</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 260</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    % extract training sample image region</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.88 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 261</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    pixels = <a href="file147.html">get_pixels</a>(im,pos,round(sz*currentScaleFactor),sz); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 262</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 263</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    % extract features and do windowing</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.34 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 264</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    xf = <a href="file137.html">fft2</a>(bsxfun(@times,<a href="file152.html">get_features</a>(pixels,features,global_feat_params),cos_window)); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 265</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 266</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if (frame == 1) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 267</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        model_xf = xf; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 268</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.26 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 269</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        model_xf = ((1 - learning_rate) * model_xf) + (learning_rate * xf); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 270</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 271</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 272</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    g_f = single(zeros(size(xf))); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 273</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    h_f = g_f; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 274</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    l_f = g_f; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 275</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    mu    = 1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 276</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    betha = 10; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 277</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    mumax = 10000; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 278</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    i = 1; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 279</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 280</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 281</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    T = prod(use_sz); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.25 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 282</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    S_xx = sum(conj(model_xf) .* model_xf, 3); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 283</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %   ADMM</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 284</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    while (i &lt;= admm_iterations) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 285</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 286</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        A = mu / (admm_gamma + 1); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 287</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        B = S_xx + T * A; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.43 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 288</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        S_lx = sum(conj(model_xf) .* l_f, 3); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.44 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 289</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        S_hx = sum(conj(model_xf) .* h_f, 3); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  4.24 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 290</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFF0F0; padding:1px;">        g_f = (1 / (1 + admm_gamma)) * ( (((1/(T*A)) * bsxfun(@times, yf, model_xf)) + (admm_gamma / A) * bsxfun(@times, M_prev, model_xf) - ((1/A) * l_f) + (mu/A)* h_f) - ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 291</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFF0F0; padding:1px;">            bsxfun(@rdivide,(((1/(T*A)) * bsxfun(@times, model_xf, (S_xx .* yf))) + (admm_gamma/A) * bsxfun(@times, model_xf, (S_xx .* M_prev)) - ((1/A) * bsxfun(@times, model_xf, S_lx)) + (mu/A)*(bsxfun(@times, model_xf, S_hx))), B));         </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 292</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 293</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        %   solve for H</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.90 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 294</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        h = (T/((mu*T)+ params.admm_lambda))* <a href="file153.html">ifft2</a>((mu*g_f) + l_f); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.08 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 295</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        [sx,sy,h] = <a href="file154.html">get_subwindow_no_window</a>(h, floor(use_sz/2) , small_filter_sz); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.12 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 296</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        t = single(zeros(use_sz(1), use_sz(2), size(h,3))); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.05 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 297</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        t(sx,sy,:) = h; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.53 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 298</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        h_f = <a href="file137.html">fft2</a>(t); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 299</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 300</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        %   update L</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.41 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 301</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        l_f = l_f + (mu * (g_f - h_f)); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 302</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 303</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        %   update mu- betha = 10.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 304</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        mu = min(betha * mu, mumax); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 305</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        i = i+1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    716 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 306</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 307</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 308</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    % save current response map</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 309</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if(frame == 1) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 310</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        responsef = permute(sum(bsxfun(@times, conj(g_f), xf), 3), [1 2 4 3]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 311</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        responsef_padded = <a href="file155.html">resizeDFT2</a>(responsef, interp_sz); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 312</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % response in the spatial domain</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 313</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        response = <a href="file153.html">ifft2</a>(responsef_padded, 'symmetric'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 314</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        M_prev = <a href="file156.html">fftshift</a>(response); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 315</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        max_M_prev = max(M_prev(:)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 316</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        [id_ymax_prev,id_xmax_prev]=find(M_prev == max_M_prev); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 317</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 318</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        M_prev = M_curr; </span><br/></pre></td></tr><tr><a name="Line319"></a><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 319</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        max_M_prev = max_M_curr; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 320</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        id_ymax_prev = id_ymax_curr; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 321</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        id_xmax_prev = id_xmax_curr; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 322</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 323</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 324</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    target_sz = floor(base_target_sz * currentScaleFactor); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 325</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 326</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %save position and calculate FPS</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 327</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    rect_position(loop_frame,:) = [pos([2,1]) - floor(target_sz([2,1])/2), target_sz([2,1])]; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 328</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 329</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    time = time + toc(); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 330</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 331</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    %visualization</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 332</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    if visualization == 1 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 333</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        rect_position_vis = [pos([2,1]) - target_sz([2,1])/2, target_sz([2,1])]; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  6.95 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 334</span><a name="Line334"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFD4D4; padding:1px;">        im_to_show = double(im)/255; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 335</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if size(im_to_show,3) == 1 </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 336</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            im_to_show = repmat(im_to_show, [1 1 3]);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 337</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        end</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    358 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 338</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        if frame == 1 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.48 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 339</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            fig_handle = figure('Name', 'Tracking'); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 340</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file165.html">imagesc</a>(im_to_show); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 341</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file166.html">hold</a> on; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 342</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            rectangle('Position',rect_position_vis, 'EdgeColor','g', 'LineWidth',2); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 343</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            text(10, 10, <a href="file34.html">int2str</a>(frame), 'color', [0 1 1]); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 344</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file166.html">hold</a> off; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">      3 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 345</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file168.html">axis</a> off;<a href="file168.html">axis</a> image;set(gca, 'Units', 'normalized', 'Position', [0 0 1 1]) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 346</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 347</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            resp_sz = round(sz*currentScaleFactor*scaleFactors(scale_ind)); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 348</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            xs = floor(old_pos(2)) + (1:resp_sz(2)) - floor(resp_sz(2)/2); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 349</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            ys = floor(old_pos(1)) + (1:resp_sz(1)) - floor(resp_sz(1)/2); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 350</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            sc_ind = floor((nScales - 1)/2) + 1; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 351</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.33 </span></pre></td><td><pre><span style="color: #0000FF">    355 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 352</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            figure(fig_handle); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  3.81 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 353</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFF0F0; padding:1px;">            <a href="file165.html">imagesc</a>(im_to_show); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.26 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 354</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file166.html">hold</a> on; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.19 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 355</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            resp_handle = <a href="file165.html">imagesc</a>(xs, ys, <a href="file156.html">fftshift</a>(response(:,:,sc_ind))); <a href="file178.html">colormap</a> hsv; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.27 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 356</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file179.html">alpha</a>(resp_handle, 0.2); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.24 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 357</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            rectangle('Position',rect_position_vis, 'EdgeColor','g', 'LineWidth',2); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.78 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 358</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            text(20, 30, ['# Frame : ' <a href="file34.html">int2str</a>(loop_frame) ' / ' <a href="file34.html">int2str</a>(num_frames)], 'color', [1 0 0], 'BackgroundColor', [1 1 1], 'fontsize', 16); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.75 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 359</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            text(20, 100, ['FPS : ' <a href="file32.html">num2str</a>(1/(time/loop_frame))], 'color', [1 0 0], 'BackgroundColor', [1 1 1], 'fontsize', 16); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 360</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.25 </span></pre></td><td><pre><span style="color: #0000FF">    353 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 361</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            <a href="file166.html">hold</a> off; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    356 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 362</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 22.50 </span></pre></td><td><pre><span style="color: #0000FF">    356 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 363</span><a name="Line363"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">        drawnow </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    356 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 364</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    356 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 365</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">    loop_frame = loop_frame + 1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">    356 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 366</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.09 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 367</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;"><a href="file187.html">close</a> all </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 368</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 369</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%   save resutls.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 370</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">fps = loop_frame / time; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 371</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">results.type = 'rect'; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 372</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">results.res = rect_position; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 373</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">results.fps = fps; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.01 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 374</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">results.map_diff = map_diff; </span><br/></pre></td></tr></table><p><p>Other subfunctions in this file are not included in this listing.</body></html>